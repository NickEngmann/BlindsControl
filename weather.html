<!DOCTYPE html>
<!--
Weather Station and Window Control

See README.md for more information.

This work is released under the Creative Commons Zero (CC0) license.
See http://creativecommons.org/publicdomain/zero/1.0/
-->
<html>
<head>
  <meta charset="utf-8">
  <title>Room Weather Station</title>
  <link rel="stylesheet" href="weather.css" type="text/css" />
  <script type="text/javascript" src="/js/erpc.js"></script>
    <script type="text/javascript" src="/js/erpc.js"></script>
	<style>
		#sliderObj {
			position: relative;
			margin-top: 10px;
			width: 300px;
			height: 30px;
		}
	</style>
	<script>       
        function sweepme() {
            erpc("sweep");
        };
        function openBlinds() {
            erpc("set_position1",180);
            erpc("set_position2",180);
        };
        function openBlindsAlpha() {
            erpc("set_position1",360);

        };
        function closeBlindsAlpha() {
            erpc("set_position1",0);
        };
        function openBlindsBeta() {
            erpc("set_position2",360);
        };
        function closeBlindsBeta() {
            erpc("set_position2",0);
        };
        function closeBlinds() {
            erpc("set_position1",0);
            erpc("set_position2",0);
        };
        function getWeather() {
          erpc("getWeather", null, function(result) {
            document.getElementById("humidity").innerHTML =
              result.humidity.toFixed(1) + " %";
              var fixedHumidity = result.humidity.toFixed(1);
              if(fixedHumidity > 60){
              	//openBlinds();
                //console.log("Blinds Open");
              }
              else{
              	//closeBlinds();
                //console.log("Blinds Open");
              }
               console.log(result.humidity); 
            // Convert Celsius to Fahrenheit
            document.getElementById("temp").innerHTML =
              (result.temp * 1.9 + 32).toFixed(1) + " &deg;F";
              //console.log((result.temp * 1.9 + 32));
              var fixedTemp = (result.temp * 1.9 + 32);
              console.log(fixedTemp);
              if(fixedTemp > 78){
              	//openBlinds();
                //console.log("Curtains Open");
              }
              else{
              	//closeBlinds();
                //console.log("Curtains Closed");
              }
            document.getElementById("daylight").innerHTML =
              (result.light/1000).toFixed(1);
              var fixedLight = (result.light/1000);
              console.log(fixedLight);
              if(fixedLight < 25){
              	//openBlinds();
                //console.log("Blinds Open");
              }
              else{
              	//closeBlinds();
                //console.log("Blinds Closed");
              }
          //setTimeout(getWeather, 10000);
          },
          function(text) {
            console.log("error: " + text);
          	//setTimeout(getWeather, 10000);
          });
        }
        getWeather();
        //setTimeout(getWeather, 10000);
	</script>
</head>
<body>
<div id="clouds">
	<div class="cloud x1"></div>
	<!-- Time for multiple clouds to dance around -->
	<div class="cloud x2"></div>
	<div class="cloud x3"></div>
	<div class="cloud x4"></div>
	<div class="cloud x5"></div>
</div>
  <h1 class="titleHeader">Weather Station</h1>
  <div class="box1">
    <h3>Temperature</h3>
    <h2 id="temp"></h2>
  </div>
  <div class="box2">
    <h3>Humidity</h3>
    <h2 id="humidity"></h2>
  </div>
  <div class="box3">
    <h3>Light Levels</h3>
    <h2 id="daylight"></h2>
  </div>
	<!--div id="sweep"></div><button onclick="sweepme()">Sweep Servos</button-->
	<button class="button-open" onclick="openBlinds()">Open Blinds</button>
    <button class="button-close" onclick="closeBlinds()">Close Blinds</button>
</body>
</html>
